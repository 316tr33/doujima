# 🎯 品質検証基準・チェックリスト

**目的**: 各フェーズで一定の品質を保証し、最終的に完璧なモバイル対応サイトを実現する

---

## 🔍 Phase 1: CSS 構造統一化 - 品質基準

### ✅ Task 1.1: CSS 変数統一 - 検証基準

#### 🔴 Critical チェック

- [ ] **全変数抽出完了**: `grep -r ":root" css/` で 5 ファイル全検出
- [ ] **重複変数特定**: 同名変数の値違いを 100%特定
- [ ] **統一変数決定**: 全重複変数の統一値を決定済み

#### 検証コマンド

```bash
# 変数抽出確認
grep -r ":root" css/ | wc -l  # 結果: 5 (各ファイル1つずつ)
grep -r "--primary-gold" css/ | wc -l  # 結果: 統一前の数

# 重複変数確認
grep -r "--primary-gold:" css/ | cut -d: -f2 | sort | uniq -c
```

**合格基準**: 全変数が文書化され、統一値が明確に定義されている

---

### ✅ Task 1.2: 新 CSS 構造作成 - 検証基準

#### 🔴 Critical チェック

- [ ] **ディレクトリ構造**: 規定通りの 4 ディレクトリ存在
- [ ] **基本ファイル**: 各ディレクトリに必要ファイル存在
- [ ] **ファイルアクセス権**: 適切な読み書き権限設定

#### 検証コマンド

```bash
# ディレクトリ構造確認
find css -type d | sort
# 期待結果:
# css
# css/base
# css/components
# css/pages
# css/responsive

# 基本ファイル存在確認
find css/base -name "*.css" | wc -l  # 結果: 4ファイル以上
```

**合格基準**: 全ディレクトリとベースファイルが正しく作成されている

---

### ✅ Task 1.3: variables.css 作成 - 検証基準

#### 🔴 Critical チェック

- [ ] **完全性**: 既存の全 CSS 変数を包含
- [ ] **構文正確性**: CSS エラーなし
- [ ] **命名規則**: 一貫した変数命名
- [ ] **コメント**: 各変数グループに説明コメント

#### 検証コマンド

```bash
# CSS構文チェック（Node.js css-tree使用例）
npx css-tree-validator css/base/variables.css

# 変数数確認
grep -c "^  --" css/base/variables.css  # 期待: 30個以上

# 重複変数確認（同一ファイル内）
grep "^  --" css/base/variables.css | cut -d: -f1 | sort | uniq -c | grep -v "1 "
```

**合格基準**: エラーなし、全既存変数包含、命名規則統一

---

## 🔍 Phase 1: ファイル分割 - 品質基準

### ✅ Task 2.1-2.3: CSS ファイル分割 - 検証基準

#### 🔴 Critical チェック

- [ ] **ファイルサイズ**: 各ファイル 1500 行以下
- [ ] **責任分離**: ファイルごとに明確な役割
- [ ] **import 完整性**: 必要な依存関係が正しく設定
- [ ] **機能保持**: 既存機能の 100%動作維持

#### 検証コマンド

```bash
# ファイルサイズ確認
wc -l css/pages/*.css css/components/*.css
# 全ファイル1500行以下であることを確認

# 機能テスト（基本表示確認）
# ブラウザで各ページを開き、レイアウト崩れがないことを確認
```

#### 🟡 Important チェック

- [ ] **重複除去**: 同一セレクターが複数ファイルに存在しない
- [ ] **CSS 最適化**: 不要なプロパティ削除
- [ ] **コメント整理**: 適切な説明コメント配置

**合格基準**: 全機能正常動作、ファイルサイズ目標達成、責任分離明確

---

## 🔍 Phase 2: モバイル対応 - 品質基準

### ✅ Task 4.1-4.2: ブレークポイント統一 - 検証基準

#### 🔴 Critical チェック

- [ ] **統一性**: 全メディアクエリが統一ブレークポイント使用
- [ ] **一貫性**: 全ページで同一ブレークポイント適用
- [ ] **変数利用**: ハードコードされた px 値なし

#### 検証コマンド

```bash
# 古いブレークポイント残存確認
grep -r "@media.*768px" css/ | grep -v "var(--bp"  # 結果: 0件
grep -r "@media.*480px" css/ | grep -v "var(--bp"  # 結果: 0件
grep -r "@media.*1024px" css/ | grep -v "var(--bp"  # 結果: 0件

# 変数使用確認
grep -r "@media.*var(--bp" css/ | wc -l  # 結果: 全メディアクエリ数
```

**合格基準**: 統一ブレークポイント 100%使用、ハードコード値 0 件

---

### ✅ Task 5.1-5.2: モバイルファースト - 検証基準

#### 🔴 Critical チェック

- [ ] **基本動作**: 320px 幅で全機能動作
- [ ] **タッチ対応**: 最小 44px×44px タップターゲット
- [ ] **読みやすさ**: モバイルでの文字サイズ適切
- [ ] **ナビゲーション**: モバイルメニュー完全動作

#### 検証テスト

```
デバイス幅320px-480pxでの確認項目:
□ メニュー開閉動作
□ スライドショー表示・操作
□ フォーム入力・送信
□ リンククリック（指で押しやすさ）
□ スクロール動作
□ テキスト読みやすさ
```

**合格基準**: 320px 以上で全機能正常動作、UX 問題なし

---

### ✅ Task 6.1-6.3: コンポーネント最適化 - 検証基準

#### 🔴 Critical チェック

- [ ] **ナビゲーション**: ハンバーガーメニュー完璧動作
- [ ] **スライドショー**: スワイプ操作対応
- [ ] **県別グリッド**: モバイルで 1 列表示
- [ ] **フォーム**: 入力しやすいサイズとレイアウト

#### コンポーネント別テスト

**ナビゲーション**:

- [ ] ハンバーガーアイコンタップ反応
- [ ] メニュー開閉アニメーション
- [ ] メニュー項目タップ動作
- [ ] オーバーレイタップで閉じる

**スライドショー**:

- [ ] 自動送り動作
- [ ] スワイプ左右操作
- [ ] プログレスバー表示
- [ ] ドット選択動作

**県別グリッド**:

- [ ] モバイルで 1 列表示
- [ ] カード間の適切な間隔
- [ ] 画像アスペクト比維持
- [ ] テキスト読みやすさ

**合格基準**: 各コンポーネントで完璧なモバイル UX 実現

---

## 🔍 Phase 3: 最終品質保証 - 品質基準

### ✅ Task 7.1: 機能テスト - 検証基準

#### 🔴 Critical チェック

- [ ] **全ページ動作**: 5 ページすべて正常動作
- [ ] **JavaScript 機能**: 全 JS 機能正常動作
- [ ] **リンク動作**: 内部・外部リンク正常
- [ ] **フォーム**: 入力・送信正常

#### ページ別チェックリスト

**index.html**:

- [ ] スライドショー自動送り
- [ ] ナビゲーション動作
- [ ] スムーススクロール
- [ ] 県別グリッド表示
- [ ] フッターリンク動作

**Ohenro/index.html**:

- [ ] お遍路固有機能
- [ ] STEP 学習システム
- [ ] 動画埋め込み再生
- [ ] 相互ナビゲーション

**Ohenro/shikoku.html**:

- [ ] 霊場検索機能
- [ ] 県別フィルター
- [ ] 重要霊場フィルター
- [ ] カード表示

**Tokaido/index.html**:

- [ ] 東海道固有機能
- [ ] 宿場町情報表示
- [ ] 相互ナビゲーション

**recruit.html**:

- [ ] 採用情報表示
- [ ] フォーム機能

**合格基準**: 全ページ・全機能で問題なし

---

### ✅ Task 7.2: レスポンシブテスト - 検証基準

#### 🔴 Critical チェック

- [ ] **320px**: iPhone SE 完璧表示
- [ ] **375px**: iPhone 12 mini 完璧表示
- [ ] **768px**: iPad 完璧表示
- [ ] **1024px**: iPad Pro 完璧表示
- [ ] **1920px**: デスクトップ完璧表示

#### 解像度別チェックポイント

**320px-480px (Mobile)**:

- [ ] 1 列レイアウト
- [ ] ハンバーガーメニュー
- [ ] テキスト読みやすさ
- [ ] ボタンタップしやすさ
- [ ] 水平スクロールなし

**481px-768px (Tablet)**:

- [ ] 2 列レイアウト（適用箇所）
- [ ] 適切な画像サイズ
- [ ] ナビゲーション表示
- [ ] テキスト配置

**769px 以上 (Desktop)**:

- [ ] デスクトップレイアウト
- [ ] ホバー効果動作
- [ ] 大画面での中央配置
- [ ] 画像品質維持

**合格基準**: 各解像度で完璧な表示・操作性

---

### ✅ Task 7.3: パフォーマンステスト - 検証基準

#### 🔴 Critical チェック

- [ ] **PageSpeed Mobile**: 90 点以上
- [ ] **GTmetrix Grade**: A 以上
- [ ] **CSS 削減**: 元サイズから 50%以上削減
- [ ] **読み込み時間**: 3 秒以下

#### パフォーマンス測定

**CSS 最適化確認**:

```bash
# CSS総サイズ確認
du -sh css/*.css css/*/*.css | awk '{sum+=$1}END{print sum "KB"}'

# 削減率計算
# 元サイズ: 約50KB → 目標: 25KB以下
```

**PageSpeed 測定項目**:

- [ ] First Contentful Paint (FCP)
- [ ] Largest Contentful Paint (LCP)
- [ ] First Input Delay (FID)
- [ ] Cumulative Layout Shift (CLS)

**合格基準**: 全項目で Google の推奨値達成

---

## 📊 最終品質確認チェックリスト

### 🎯 定量指標達成確認

- [ ] **CSS 行数削減**: 10,000 行 → 5,000 行以下（50%削減）
- [ ] **CSS 総ファイルサイズ**: 元サイズから 50%以上削減
- [ ] **PageSpeed Mobile Score**: 90 点以上
- [ ] **レスポンシブ対応**: 320px-1920px 完全対応
- [ ] **エラー件数**: CSS エラー 0 件、JS エラー 0 件

### 🎯 定性指標達成確認

- [ ] **コード保守性**: ファイル役割が明確、修正箇所が特定しやすい
- [ ] **開発効率**: 新機能追加時の作業が明確
- [ ] **UX 品質**: 全デバイスで一貫した優秀な体験
- [ ] **将来拡張性**: 新しいページやコンポーネント追加が容易

### 🎯 アクセシビリティ確認

- [ ] **キーボードナビゲーション**: Tab 順序適切
- [ ] **スクリーンリーダー**: 適切な要素構造
- [ ] **カラーコントラスト**: WCAG 2.1 AA 準拠
- [ ] **フォーカス表示**: 明確なフォーカス状態

---

## 🚨 品質問題対応プロセス

### 問題レベル分類

- **🔴 Critical**: 機能停止、表示崩れ → 即座修正
- **🟡 Important**: UX 低下、パフォーマンス問題 → 24 時間以内修正
- **🟢 Nice-to-Have**: 改善提案、最適化 → スケジュール内で対応

### 対応フロー

1. **問題発見** → 即座に作業停止
2. **影響範囲特定** → 他への波及調査
3. **原因分析** → 根本原因の特定
4. **修正実施** → 最小限の修正で対応
5. **回帰テスト** → 関連機能の再確認
6. **文書化** → 問題と対応を記録

---

**✅ この品質基準を守ることで、確実に高品質なモバイル対応サイトを実現できます！**
